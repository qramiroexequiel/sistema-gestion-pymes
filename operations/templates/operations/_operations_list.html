<div id="operations-list" hx-target="this" hx-swap="outerHTML">
{% if operations %}
    <div class="card">
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-hover mb-0" style="border-collapse: separate; border-spacing: 0;">
                    <thead style="background-color: var(--bg-tertiary);">
                        <tr>
                            <th style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Número</th>
                            <th style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Tipo</th>
                            <th style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Fecha</th>
                            <th style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Cliente/Proveedor</th>
                            <th class="text-end" style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Total</th>
                            <th style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Estado</th>
                            <th class="text-center" style="padding: 1rem 1.25rem; font-weight: 600; font-size: 0.875rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary); border-bottom: 2px solid var(--border-color);">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for operation in operations %}
                            <tr style="cursor: pointer; border-bottom: 1px solid var(--border-color);" onclick="window.location='{% url 'operations:detail' operation.pk %}'">
                                <td style="padding: 1.25rem;">
                                    <strong style="font-weight: 700; font-size: 0.9375rem; letter-spacing: var(--letter-spacing-tight);">{{ operation.number }}</strong>
                                </td>
                                <td style="padding: 1.25rem;">
                                    {% if operation.type == 'sale' %}
                                        <span class="badge badge-success">
                                            <i class="fas fa-arrow-up me-1"></i>
                                            Venta
                                        </span>
                                    {% else %}
                                        <span class="badge badge-info">
                                            <i class="fas fa-arrow-down me-1"></i>
                                            Compra
                                        </span>
                                    {% endif %}
                                </td>
                                <td style="padding: 1.25rem; color: var(--text-secondary); font-size: 0.9375rem;">{{ operation.date|date:"d/m/Y" }}</td>
                                <td style="padding: 1.25rem;">
                                    <div style="font-weight: 600; font-size: 0.9375rem;">
                                        {% if operation.customer %}
                                            <i class="fas fa-user me-1" style="color: var(--text-tertiary); font-size: 0.875rem;"></i>
                                            {{ operation.customer.name }}
                                        {% elif operation.supplier %}
                                            <i class="fas fa-truck me-1" style="color: var(--text-tertiary); font-size: 0.875rem;"></i>
                                            {{ operation.supplier.name }}
                                        {% else %}
                                            <span style="color: var(--text-tertiary);">-</span>
                                        {% endif %}
                                    </div>
                                </td>
                                <td class="text-end" style="padding: 1.25rem;">
                                    <strong style="font-weight: 700; font-size: 1rem; letter-spacing: var(--letter-spacing-tight); color: {% if operation.type == 'sale' %}var(--accent-success){% else %}var(--accent-info){% endif %};">
                                        ${{ operation.total|floatformat:2 }}
                                    </strong>
                                </td>
                                <td style="padding: 1.25rem;">
                                    {% if operation.status == 'draft' %}
                                        <span class="badge badge-secondary">
                                            <i class="fas fa-edit me-1"></i>
                                            Borrador
                                        </span>
                                    {% elif operation.status == 'confirmed' %}
                                        <span class="badge badge-success">
                                            <i class="fas fa-check-circle me-1"></i>
                                            Confirmado
                                        </span>
                                    {% elif operation.status == 'cancelled' %}
                                        <span class="badge badge-danger">
                                            <i class="fas fa-times-circle me-1"></i>
                                            Cancelado
                                        </span>
                                    {% endif %}
                                </td>
                                <td class="text-center" style="padding: 1.25rem;" onclick="event.stopPropagation();">
                                    <a href="{% url 'operations:detail' operation.pk %}" 
                                       class="btn btn-sm btn-outline-primary" 
                                       title="Ver detalle">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
            {% include 'includes/pagination.html' with target_id='#operations-list' %}
        </div>
    </div>
{% else %}
    <div class="empty-state-container">
        <div class="empty-state-icon">
            <i class="fas fa-inbox"></i>
        </div>
            <div class="empty-state-title">Aún no hay operaciones registradas</div>
            <div class="empty-state-text">Registrá tu primera venta o compra. Todo queda guardado y podés editarlo cuando quieras.</div>
        <a href="{% url 'operations:create' %}" class="btn btn-primary">
            <i class="fas fa-plus me-2"></i>
            Registrar Primera Operación
        </a>
    </div>
{% endif %}
</div>
